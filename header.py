import json
from urllib.parse import quote
import random

indentity = [
    {
        "birthday": "1990-06-15",
        "friendCount": 10,
        "gender": 0,
        "avatarUrl": "https://file.mysmth.net/file/66885a911ee88d9a28392ff35f1d0630",
        "level": 8,
        "suicide": False,
        "isFans": True,
        "mobile": "13311112222",
        "articleCount": 8,
        "fansCount": 105,
        "avatar": "file/66885a911ee88d9a28392ff35f1d0630",
        "levelTitle": "高手",
        "type": 1,
        "nick": "user2",
        "score": 88,
        "loginTime": 1663660353000,
        "createTime": 1663660300000,
        "isBlack": False,
        "name": "user2",
        "id": "1234567892",
        "k3sUrl": "http://ks3-cn-beijing.ksyun.com/avatar/66885a911ee88d9a28392ff35f1d0630",
        "title": "VIP",
    },
    {
        "birthday": "1985-09-02",
        "friendCount": 8,
        "gender": 1,
        "avatarUrl": "https://file.mysmth.net/file/66885a911ee88d9a28392ff35f1d0631",
        "level": 6,
        "suicide": False,
        "isFans": False,
        "mobile": "15088887777",
        "articleCount": 2,
        "fansCount": 50,
        "avatar": "file/66885a911ee88d9a28392ff35f1d0631",
        "levelTitle": "中手",
        "type": 0,
        "nick": "user3",
        "score": 44,
        "loginTime": 1663661353000,
        "createTime": 1663660300000,
        "isBlack": False,
        "name": "user3",
        "id": "1234567893",
        "k3sUrl": "http://ks3-cn-beijing.ksyun.com/avatar/66885a911ee88d9a28392ff35f1d0631",
        "title": "普通用户",
    },
    {
        "birthday": "1995-05-05",
        "friendCount": 50,
        "gender": 0,
        "avatarUrl": "https://file.mysmth.net/file/66885a911ee88d9a28392ff35f1d062a",
        "level": 8,
        "suicide": False,
        "isFans": True,
        "mobile": "18629050465",
        "articleCount": 20,
        "fansCount": 500,
        "avatar": "file/66885a911ee88d9a28392ff35f1d062a",
        "levelTitle": "高手",
        "type": 1,
        "nick": "jason",
        "score": 80,
        "loginTime": 1663639354000,
        "createTime": 1620823200000,
        "isBlack": False,
        "name": "jason",
        "id": "908238593",
        "k3sUrl": "http://ks3-cn-beijing.ksyun.com/avatar/66885a911ee88d9a28392ff35f1d062a",
        "title": "VIP",
    },
    {
        "birthday": "1990-10-10",
        "friendCount": 100,
        "gender": 1,
        "avatarUrl": "https://file.mysmth.net/file/66885a911ee88d9a28392ff35f1d062b",
        "level": 9,
        "suicide": False,
        "isFans": False,
        "mobile": "13629050465",
        "articleCount": 10,
        "fansCount": 1000,
        "avatar": "file/66885a911ee88d9a28392ff35f1d062b",
        "levelTitle": "大师",
        "type": 0,
        "nick": "john",
        "score": 90,
        "loginTime": 1663639355000,
        "createTime": 1521640800000,
        "isBlack": False,
        "name": "john",
        "id": "398421349",
        "k3sUrl": "http://ks3-cn-beijing.ksyun.com/avatar/66885a911ee88d9a28392ff35f1d062b",
        "title": "版主",
    },
    {
        "birthday": "1990-05-15",
        "friendCount": 8,
        "gender": 0,
        "avatarUrl": "https://file.mysmth.net/file/123456789",
        "level": 8,
        "suicide": False,
        "isFans": True,
        "mobile": "13612345678",
        "articleCount": 5,
        "fansCount": 10,
        "avatar": "file/123456789",
        "levelTitle": "水手",
        "type": 1,
        "nick": "jack",
        "score": 85,
        "loginTime": 1663640000000,
        "createTime": 1598918400000,
        "isBlack": False,
        "name": "Jack Chen",
        "id": "abcdefg12345",
        "k3sUrl": "http://ks3-cn-beijing.ksyun.com/avatar/123456789",
        "title": "高级会员",
    },
    {
        "birthday": "1980-01-01",
        "friendCount": 1,
        "gender": 1,
        "avatarUrl": "https://file.mysmth.net/file/66885a911ee88d9a28392ff35f1d062e",
        "level": 5,
        "suicide": False,
        "isFans": False,
        "mobile": "15829050465",
        "articleCount": 0,
        "fansCount": 0,
        "avatar": "file/66885a911ee88d9a28392ff35f1d062e",
        "levelTitle": "乔木",
        "type": 0,
        "nick": "hejian",
        "score": 11,
        "loginTime": 1663639353000,
        "createTime": 1614823588000,
        "isBlack": False,
        "name": "hejian",
        "id": "401ec7ec99e01dd5eee8951e358b3574",
        "k3sUrl": "http://ks3-cn-beijing.ksyun.com/avatar/66885a911ee88d9a28392ff35f1d062e",
        "title": "用户",
    },
]
cookie_dict = {
    "kbs-key": "1+a/mfK7wMHTrdSCfBCHtaFmMC/2OxdYbTNIRM/Ekz8Xh2QWsZxAXmetsf3upAVh",
    "kbs-info": "1OpqUOExrInXaK33GfSCwv7sEOY/Z373cFXciNwwlT0=",
    "set_identity": random.choice(indentity),
}

kbs_key_encode_str = quote(cookie_dict.get("kbs-key"), safe='{}:"').replace('"', "")  # type: ignore
kbs_info_encode_str = quote(cookie_dict.get("kbs-info"), safe='{}:"').replace('"', "")  # type: ignore
kbs_identity_encode_str = quote(
    json.dumps(cookie_dict.get("set_identity")), safe="{}:/"
)
# 可选的 sec-ch-ua 值
sec_ch_ua_list = [
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.182 Safari/537.36",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36",
    # ... 添加更多可选值
]

# 随机选择多个 sec-ch-ua 值，生成一个假的头部
sec_ch_ua_values = random.sample(sec_ch_ua_list, 3)
sec_ch_ua_header = ", ".join(f'"{value}"' for value in sec_ch_ua_values)
headers = {
    "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
    "accept-language": "zh-CN,zh;q=0.9,ar;q=0.8,en;q=0.7",
    "cache-control": "no-cache",
    "pragma": "no-cache",
    "sec-ch-ua": sec_ch_ua_header,
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": '"Windows"',
    "sec-fetch-dest": "document",
    "sec-fetch-mode": "navigate",
    "sec-fetch-site": "none",
    "sec-fetch-user": "?1",
    "upgrade-insecure-requests": "1",
    "cookie": f"kbs-key={kbs_key_encode_str}; kbs-info={kbs_info_encode_str}; set_identity={kbs_identity_encode_str}",
}
